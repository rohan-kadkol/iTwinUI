// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@import '../style/index';

$input-size: $iui-icons-default;

@mixin iui-inputs-checkbox-radio {
  @include iui-reset;
  display: flex;
  align-items: center;
  font-size: $iui-font-size;
  width: fit-content;
  user-select: none;
  position: relative;
  cursor: pointer;
  @include themed {
    color: rgba(t(iui-color-foreground-body-rgb), t(iui-opacity-2));
  }

  input[type='checkbox'],
  input[type='radio'] {
    @include iui-reset;
    @include iui-focus($thickness: 2px);
    display: inline-block;
    flex-shrink: 0;
    position: relative;
    appearance: none;
    width: $input-size;
    height: $input-size;
    box-sizing: border-box;
    transition: border-color $iui-speed-fast ease;
    cursor: pointer;
    @include themed {
      border: 1px solid rgba(t(iui-color-foreground-body-rgb), t(iui-opacity-4));
      background-color: t(iui-color-background-1);
    }

    &:enabled:hover {
      @include themed {
        border-color: rgba(t(iui-color-foreground-body-rgb), t(iui-opacity-2));
      }

      &::before {
        @include themed {
          background-color: rgba(t(iui-color-foreground-body-rgb), t(iui-opacity-6));
        }
      }
    }

    &:disabled {
      cursor: not-allowed;
      @include themed {
        background-color: t(iui-color-background-disabled);
        border-color: t(iui-color-background-disabled);
      }

      &:checked::after,
      &:indeterminate::after {
        @include themed {
          background-color: t(iui-icons-color-actionable-disabled);
        }
      }
    }

    &::before {
      content: '';
      position: absolute;
      inset: ($iui-line-height - $input-size) * -1;
      border-radius: 50%;
      transition: background-color $iui-speed-fast ease;
    }

    &::after {
      content: '';
      position: absolute;
      inset: 0;
      mask-repeat: no-repeat;
      mask-position: center;
      mask-size: $input-size;
    }

    &:checked,
    &:indeterminate {
      &:enabled {
        @include themed {
          border-color: rgba(t(iui-color-foreground-body-rgb), t(iui-opacity-3));
        }
      }

      &::after {
        @include themed {
          background-color: t(iui-color-foreground-primary);
        }
      }
    }
  }

  &.iui-disabled {
    &,
    .iui-label {
      cursor: not-allowed;
      @include themed {
        color: t(iui-text-color-muted);
      }
    }

    .iui-label svg {
      @include themed {
        fill: t(iui-icons-color-actionable-disabled);
      }
    }
  }

  .iui-label {
    display: flex;
    align-items: center;

    svg {
      width: $iui-icons-default;
      height: $iui-icons-default;
      vertical-align: middle;
      @include themed {
        fill: t(iui-icons-color-actionable);
      }
    }
  }

  // #region Input + label positioning
  .iui-label {
    text-align: right;
  }

  input[type='checkbox'] ~ .iui-label,
  input[type='radio'] ~ .iui-label {
    text-align: left;
  }

  @supports (gap: $iui-s) {
    gap: $iui-s;
  }
  @supports not (gap: $iui-s) {
    input[type='checkbox'] ~ .iui-label,
    input[type='radio'] ~ .iui-label {
      margin-left: $iui-s;
    }

    .iui-label ~ input[type='checkbox'],
    .iui-label ~ input[type='radio'] {
      margin-left: $iui-s;
    }
  }
  // #endregion

  // #region Statuses
  &.iui-positive {
    @include themed {
      color: t(iui-color-foreground-positive);
    }
  }

  &.iui-warning {
    @include themed {
      color: t(iui-color-foreground-warning);
    }
  }

  &.iui-negative {
    @include themed {
      color: t(iui-color-foreground-negative);
    }
  }
  // #endregion
}
